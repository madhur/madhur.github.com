<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" /> 
    <title>Bulk git clone repositories &#8211; Madhur Ahuja</title>
    

    <meta name="author" content="Madhur Ahuja" />
    <meta name="description" content=" Bulk git clone repositories" />

    <link rel="start" href="/" />

    <link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/madhur" title="RSS feed" />
    <link rel="shortcut icon" href="http://www.gravatar.com/avatar/5352cde0b084abcd6d4d783c08a51c76?s=16" />

    <link rel="stylesheet" href="/files/css/bootstrap.min.css" type="text/css" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/files/font-awesome/css/font-awesome.min.css" type="text/css" />
    <script src="/files/js/vendor/fancybox.umd.js" tpye="text/javascript"></script>
    <link rel="stylesheet" href="/files/css/fancybox.css" type="text/css" />

    <link rel="stylesheet" type="text/css" href="/files/css/styles.css" /> 
    <link rel="stylesheet" type="text/css" href="/files/css/syntax.css" /> 

     <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N14VDHYFHQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N14VDHYFHQ');
</script> 
    <link rel="stylesheet" type="text/css" media="print" href="/files/css/print.css"> 

    <script src="/files/js/vendor/pace.min.js" type="text/javascript"></script>
</head>


<body>

    <div class="container">

        <header id="header" class="row">

            <nav id="navigation" class="navbar navbar-inverse navbar-fixed-top top-nav-collapse" role="navigation">
    <div class="container">

        <div class="navbar-header">

            <div class="hidden-md hidden-sm hidden-lg searchli">

                <form method="get" role="search" id="searchform" action="/results" onsubmit="return checkfrm_search();">

                    <div class="form-group">
                        <input type="search" required id="q2" name="q" value="" class="form-control mobile"
                            placeholder="Search" />
                    </div>
                </form>
            </div>

            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mainmenu">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!--  <a class="navbar-brand " href="/">Home</a> -->
        </div>

        <div class="collapse navbar-collapse" id="mainmenu">
            <ul id="nav" class="nav navbar-nav">

                <li><a class="home" href="/">Home</a>
                </li>
                <li><a class="blog" href="/blog">Blog</a>
                </li>
                <!--<li><a class="work" href="/work">Resume</a></li>-->
                <li><a class="code" href="/projects">Work</a>
                </li>
                <!--<li><a class="papers" href="/papers">Papers</a></li>-->
                <li><a class="info" href="/info">About</a>
                </li>
                <li><a class="contact" href="/contact">Contact</a>
                </li>

            </ul>

            <ul class="nav navbar-nav visible-md visible-lg visible-sm searchbox">
                <li>
                    <form method="get" role="search" id="searchform" action="/results"
                        onsubmit="return checkfrm_search();">

                        <div class="form-group">
                            <input type="search" required id="q1" name="q" value="" class="form-control desktop"
                                placeholder="Search" />
                        </div>
                    </form>
                </li>
            </ul>


            <ul class="nav-icons navbar-right nav navbar-nav visible-md visible-lg">
                <li><a href="http://www.linkedin.com/in/madhurahuja"><i class="fa fa-linkedin-square fa-3x"></i></a>
                </li>
                <li><a href="https://github.com/madhur"><i class="fa fa-github fa-3x"></i></a>
                </li>
                <li><a href="http://feeds.feedburner.com/madhur"><i class="fa fa-rss-square fa-3x"></i></a>
                </li>
            </ul>


        </div>

    </div>
</nav>

        </header>

        <div id="content" class="row">

            <section>

	<div id="blogcontent">


		<article id="blog-article" class="post col-md-12 clearfix">

			<header>
				<h1>Bulk git clone repositories</h1>
			</header>

			



<div class="post-meta">
    <time datetime="2017-02-12T00:00:00+05:30">February 12, 2017</time>
    <span class="reading-time">1 min read</span>
</div>


			<hr style="margin-top:0px" />


			<p>Recently, I was looking a way to do a git clone in bulk. I came across this nifty little script to do the same</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>
<span class="c"># The script clones all repositories of an GitHub organization.</span>
<span class="c"># Author: Jens-Andre Koch</span>

<span class="c"># the github organization to fetch all repositories for</span>
<span class="nv">GITHUB_ORGANIZATION</span><span class="o">=</span><span class="nv">$1</span>

<span class="c"># the git clone cmd used for cloning each repository</span>
<span class="c"># the parameter recursive is used to clone submodules, too.</span>
<span class="nv">GIT_CLONE_CMD</span><span class="o">=</span><span class="s2">"git clone "</span>

<span class="c"># fetch repository list via github api</span>
<span class="c"># grep fetches the json object key ssh_url, which contains the ssh url for the repository</span>
<span class="nv">REPOLIST</span><span class="o">=</span><span class="sb">`</span>curl <span class="nt">--silent</span> https://api.github.com/orgs/<span class="k">${</span><span class="nv">GITHUB_ORGANIZATION</span><span class="k">}</span>/repos?per_page<span class="o">=</span>200 <span class="nt">-q</span> | <span class="nb">grep</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">ssh_url</span><span class="se">\"</span><span class="s2">"</span> | <span class="nb">awk</span> <span class="nt">-F</span><span class="s1">': "'</span> <span class="s1">'{print $2}'</span> | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/",//g'</span><span class="sb">`</span>

<span class="c"># loop over all repository urls and execute clone</span>
<span class="k">for </span>REPO <span class="k">in</span> <span class="nv">$REPOLIST</span><span class="p">;</span> <span class="k">do</span>
    <span class="k">${</span><span class="nv">GIT_CLONE_CMD</span><span class="k">}${</span><span class="nv">REPO</span><span class="k">}</span>
<span class="k">done</span></code></pre></figure>

<p>You can just invoke it with the argument of either user or organization. For example</p>

<p><code class="language-plaintext highlighter-rouge">./clone.sh madhur</code></p>

<p>The problem with this is that it will not clone the private repos since the API used in this request is unauthenticated and will not have access to the private repos.</p>

<p>I wrote a small little python script which will also clone the private repos.</p>

<p>First, you need to obtain your <a href="https://github.com/settings/tokens">personal access token</a></p>

<p>The gist is available <a href="https://gist.github.com/madhur/b21e142b529a958ab6413e92bca39e17">here</a></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">import requests
import json
import subprocess

GITHUB_ORGANIZATION <span class="o">=</span> <span class="s2">"madhur"</span>
<span class="nv">ACCESS_TOKEN</span><span class="o">=</span><span class="s2">""</span>
<span class="nv">CLONE_DIR</span><span class="o">=</span><span class="s2">"./"</span>

r <span class="o">=</span> requests.get<span class="o">(</span><span class="s2">"https://api.github.com/orgs/"</span> + GITHUB_ORGANIZATION + <span class="s2">"/repos?per_page=200&amp;access_token="</span> + ACCESS_TOKEN<span class="o">)</span>

data <span class="o">=</span> json.loads<span class="o">(</span>r.text<span class="o">)</span>

<span class="k">for </span>repo <span class="k">in </span>data:
    print repo[<span class="s1">'full_name'</span><span class="o">]</span>
    p <span class="o">=</span> subprocess.Popen<span class="o">([</span><span class="s2">"git"</span>,<span class="s2">"clone"</span>, repo[<span class="s1">'clone_url'</span><span class="o">]]</span>, <span class="nv">cwd</span><span class="o">=</span>CLONE_DIR<span class="o">)</span>  
    p.wait<span class="o">()</span></code></pre></figure>


			<footer>
				<div class="blocked tags">
					<p>
						
						<a href="/blog/tags/git">Git</a> |
						
					</p>
				</div>
			</footer>

			<br />



			<div class="hr"></div>

		</article>

		<div class="c">&nbsp;</div>

	</div>


</section>

<div class="c">&nbsp;</div>

        </div>


        <footer id="footer" class="row">

            <p id="copyright">
                &copy; 2011-2026 Madhur Ahuja
            </p>
            <p id="poweredby" class="visible-lg visible-md">
                Powered by <a href="http://jekyllrb.com">Jekyll</a> and <a href="http://github.com/">Github</a>.
            </p>

            <div class="c">&nbsp;</div>


        </footer>


    </div>

    <script src="/files/js/main.js"></script> 
    

    <!-- serviceWorker.html -->
    <script>
        if ('serviceWorker' in navigator) {

            navigator.serviceWorker.getRegistrations().then(function (registrations) {
                for (let registration of registrations) {
                    registration.unregister()
                }
            })
        }

// if ('serviceWorker' in navigator) {
//     navigator.serviceWorker.register('/serviceWorker.js').then(function(reg) {
//         if (!reg.installing) return;
//         console.log("[*] ServiceWorker is installing...");

//         var worker = reg.installing;
//         worker.addEventListener('statechange', function() {
//             if (worker.state == 'redundant') {
//                 console.log('[*] Install failed');
//             }
//             if (worker.state == 'installed') {
//                 console.log('[*] Install successful!');
//             }
//         });
//     });
// }

    </script>

</body>

</html>